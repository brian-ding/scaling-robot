{
  "repo": "brian-ding/glowing-train",
  "prNumber": 3,
  "title": "cicd: [Noticket] Add new workflow for ai pr review",
  "description": "Description: Add new workflow for ai pr review\n\n![image](https://github.com/user-attachments/assets/0ec6f07f-786a-431b-88e6-c0eb54c3f415)",
  "diff": "diff --git a/.github/workflows/ai-pr-review.yml b/.github/workflows/ai-pr-review.yml\nnew file mode 100644\nindex 0000000..9eae33f\n--- /dev/null\n+++ b/.github/workflows/ai-pr-review.yml\n@@ -0,0 +1,49 @@\n+name: AI PR Review\n+\n+on:\n+  pull_request:\n+    types: [opened, synchronize, reopened]\n+  workflow_dispatch: {}\n+permissions:\n+  id-token: write\n+  contents: read\n+  pull-requests: write\n+  issues: write\n+env:\n+  LLM_HOST: ${{secrets.LLM_HOST}}\n+\n+jobs:\n+  ai-pr-review:\n+    runs-on: hackthon\n+    steps:\n+      - name: Checkout Repository\n+        uses: actions/checkout@v4\n+\n+      - name: Setup Python\n+        uses: actions/setup-python@v5\n+        with:\n+          python-version: '3.10'\n+\n+      - name: Checkout common-scripts repository\n+        uses: actions/checkout@v4\n+        with:\n+          repository: brian-ding/scaling-robot\n+          ref: main\n+          #ref: feature/castle/add-review-and-sammary-command\n+          path: scaling-robot\n+\n+      - name: Restore pip packages\n+        working-directory: ./scaling-robot\n+        run: pip install -r requirements.txt\n+\n+      - name: PR summary\n+        working-directory: ./scaling-robot\n+        run: python main.py summary -r ${{ github.event.repository.full_name }} -n ${{ github.event.pull_request.number}}\n+        env:\n+          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+\n+      - name: PR code review\n+        working-directory: ./scaling-robot\n+        run: python main.py review -r ${{ github.event.repository.full_name }} -n ${{ github.event.pull_request.number}}\n+        env:\n+          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}"
}
